<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login - Pomodoro Timer</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="data:," />

  <!-- Font Awesome for eye/eye-slash icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .login-card {
      width: 100%;
      max-width: 400px;
      position: relative;
    }
    .login-card label {
      display: block;
      margin-bottom: 12px;
    }
    .login-card input[type="text"],
    .login-card input[type="password"] {
      width: 100%;
      padding-right: 40px; /* make space for eye icon */
    }
    .password-wrapper {
      position: relative;
    }
    .toggle-password {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 18px;
      color: var(--fg-muted, #777);
    }
    .toggle-password:hover {
      color: var(--brand, #4f46e5);
    }
  </style>
</head>
<body>
  <main class="login-card timer-card">
    <h2 style="text-align:center; margin-bottom:16px;">Pomodoro Timer</h2>
    <h5 style="text-align:center; margin-bottom:16px;">v1.1 </h5>
    <form id="loginForm" class="settings">
      <div>
        <label>
          Username
          <input type="text" id="username" required />
        </label>
        <label>
          Password
          <div class="password-wrapper">
            <input type="password" id="password" required />
            <i id="togglePassword" class="fa-solid fa-eye-slash toggle-password"></i>
          </div>
        </label>
      </div>
      <div style="text-align:center; margin-top:12px;">
        <button type="submit" class="btn primary">Login</button>
      </div>
    </form>
    <p id="errorMsg" style="color: var(--danger); text-align:center; margin-top:10px; display:none;">
      Invalid username or password.
    </p>
  </main>

  <script>
    // ---------- Branding ----------
    const defaultPrefs = { themeColor: '#4f46e5', logoUrl: '' };
    function loadPrefs() {
      try {
        const raw = localStorage.getItem('pomodoro.pref.v1');
        return raw ? { ...defaultPrefs, ...JSON.parse(raw) } : defaultPrefs;
      } catch { return defaultPrefs; }
    }
    function applyBranding() {
      const prefs = loadPrefs();
      document.documentElement.style.setProperty('--brand', prefs.themeColor || defaultPrefs.themeColor);
    }
    applyBranding();

    // ---------- Show/Hide Password ----------
    const passwordField = document.getElementById("password");
    const toggleIcon = document.getElementById("togglePassword");

    toggleIcon.addEventListener("click", function () {
      const isHidden = passwordField.type === "password";
      passwordField.type = isHidden ? "text" : "password";
      toggleIcon.classList.toggle("fa-eye", isHidden);
      toggleIcon.classList.toggle("fa-eye-slash", !isHidden);
    });

    // ---------- Login ----------
    const form = document.getElementById('loginForm');
    const errorMsg = document.getElementById('errorMsg');

    form.addEventListener('submit', function(e){
      e.preventDefault();
      const user = document.getElementById('username').value.trim();
      const pass = document.getElementById('password').value.trim();

      if(user === "Admin" && pass === "021988"){
        localStorage.setItem("loggedIn", "true");
        window.location.href = "login.html"; // redirect to Pomodoro app
      } else {
        errorMsg.style.display = "block";
      }
    });
  </script>
</body>
</html>
